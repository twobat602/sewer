local Players = game:GetService("Players")
local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local hrp = character:WaitForChild("HumanoidRootPart")

local Toggle1 = TabCollect:AddToggle({ 
  Name = "Auto Collect ScrapPile",
  Description = "Teleports to each ScrapPile and fires all ProximityPrompts",
  Default = false 
})

local running = false

Toggle1:Callback(function(Value)
	running = Value
	
	while running do
		local scrapPiles = workspace:WaitForChild("DynamicFurniture"):GetChildren()
		
		for _, obj in pairs(scrapPiles) do
			if obj.Name == "ScrapPile" then
				-- Teleport player to the ScrapPile
				if hrp and obj:IsA("Model") then
					hrp.CFrame = CFrame.new(obj:GetModelCFrame().Position + Vector3.new(0, 5, 0))
					task.wait(1) -- Wait 1 second
					
					-- Fire all ProximityPrompts inside the ScrapPile
					for _, descendant in pairs(obj:GetDescendants()) do
						if descendant:IsA("ProximityPrompt") then
							fireproximityprompt(descendant)
						end
					end
					
					task.wait(1) -- Optional delay before next ScrapPile
				end
			end
		end
		
		task.wait(1) -- Small wait before repeating
	end
end)
